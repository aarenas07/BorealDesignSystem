// libs/ui-kit/src/lib/styles/_theme.scss
@use '@angular/material' as mat;
// @use 'tokens/palettes' as p;  <-- YA NO NECESITAMOS ESTO, BORRALO O COMENTALO
@use 'tokens/variables';

@include mat.core();

// 1. EL TRUCO:
// Usamos paletas NATIVAS de Material ($azure, $magenta) para satisfacer al compilador.
// No importa que sean azules, porque en el paso 2 las vamos a reemplazar.
$my-theme: mat.define-theme(
  (
    color: (
      theme-type: light,
      primary: mat.$azure-palette,
      // Paleta válida garantizada
      tertiary: mat.$magenta-palette,
      // Paleta válida garantizada
    ),
    typography: (
      brand-family: 'Roboto',
      plain-family: 'Roboto',
    ),
    density: (
      scale: 0,
    ),
  )
);

@mixin apply-theme() {
  // Genera la estructura base (bordes, sombras, etc.)
  html {
    @include mat.all-component-themes($my-theme);
  }

  // 2. EL REEMPLAZO REAL (Mapping):
  // Aquí le decimos al navegador: "Ignora el Azure, usa las variables de SicofERP".
  body {
    // Primary
    --mat-sys-primary: var(--md-sys-color-primary);
    --mat-sys-on-primary: var(--md-sys-color-on-primary);
    --mat-sys-primary-container: var(--md-sys-color-primary-container);
    --mat-sys-on-primary-container: var(--md-sys-color-on-primary-container);

    // Secondary
    --mat-sys-secondary: var(--md-sys-color-secondary);
    --mat-sys-on-secondary: var(--md-sys-color-on-secondary);
    --mat-sys-secondary-container: var(--md-sys-color-secondary-container);
    --mat-sys-on-secondary-container: var(--md-sys-color-on-secondary-container);

    // Tertiary
    --mat-sys-tertiary: var(--md-sys-color-tertiary);
    --mat-sys-on-tertiary: var(--md-sys-color-on-tertiary);
    --mat-sys-tertiary-container: var(--md-sys-color-tertiary-container);
    --mat-sys-on-tertiary-container: var(--md-sys-color-on-tertiary-container);

    // Error
    --mat-sys-error: var(--md-sys-color-error);
    --mat-sys-on-error: var(--md-sys-color-on-error);
    --mat-sys-error-container: var(--md-sys-color-error-container);
    --mat-sys-on-error-container: var(--md-sys-color-on-error-container);

    // Background & Surface
    --mat-sys-background: var(--md-sys-color-background);
    --mat-sys-on-background: var(--md-sys-color-on-background);
    --mat-sys-surface: var(--md-sys-color-surface);
    --mat-sys-on-surface: var(--md-sys-color-on-surface);
    --mat-sys-outline: var(--md-sys-color-outline);
    --mat-sys-outline-variant: var(--md-sys-color-outline-variant);

    // Configuración Global
    font-family: Roboto, sans-serif;
    background-color: var(--mat-sys-background);
    color: var(--mat-sys-on-background);
    margin: 0;
  }

  mat-icon {
    font-family: 'Material Icons' !important;
  }
}

// IMPORTANTE: Invocar el mixin para que se aplique el tema
@include apply-theme();
