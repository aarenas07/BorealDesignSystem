<!-- Uploader Section -->
<section class="component-section">
  <h2>Uploader - Cargador de Archivos (Integración con Forms)</h2>

  <!-- Mensaje de error global -->
  @if (errorMessage()) {
  <div class="error-message">
    <p>{{ errorMessage() }}</p>
  </div>
  }

  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="demo-form">
    <!-- Demo con estados de carga (Vertical - debajo) -->
    <div class="demo-group">
      <h3>Lista Vertical (Required)</h3>
      <p class="description">Este campo es requerido. Sube archivos; el segundo fallará intencionalmente.</p>

      <bds-uploader
        formControlName="verticalList"
        [accept]="'.jpg,.jpeg,.png,.pdf'"
        [maxSize]="50 * 1024 * 1024"
        [multiple]="true"
        [listOrientation]="'vertical'"
        [collapsedLabel]="'Adjuntar archivos'"
        [collapsedButtonText]="'Cargar archivos'"
        (filesSelected)="onVerticalFilesSelected($event)"
        (fileRemoved)="onFileRemoved($event)"
        (retryUpload)="onRetryUpload($event, 'verticalList')"
        (error)="onError($event)"
      ></bds-uploader>

      @if (uploadForm.get('verticalList')?.touched && uploadForm.get('verticalList')?.invalid) {
      <p class="error-text">Debes subir al menos un archivo.</p>
      }
    </div>

    <!-- Demo con orientación horizontal (al lado) -->
    <div class="demo-group">
      <h3>Lista Horizontal</h3>
      <p class="description">La lista se muestra al lado. Prueba agregando archivos aquí también.</p>
      <bds-uploader
        formControlName="horizontalList"
        [accept]="'.jpg,.jpeg,.png,.pdf'"
        [multiple]="true"
        [listOrientation]="'horizontal'"
        (filesSelected)="onHorizontalFilesSelected($event)"
        (fileRemoved)="onFileRemoved($event)"
        (error)="onError($event)"
      ></bds-uploader>
    </div>

    <!-- Demo modo compacto/responsive -->
    <div class="demo-group">
      <h3>Modo Compacto</h3>
      <div style="max-width: 300px">
        <bds-uploader
          formControlName="compactMode"
          [multiple]="false"
          [compact]="true"
          (filesSelected)="onCompactFilesSelected($event)"
          (fileRemoved)="onFileRemoved($event)"
          (error)="onError($event)"
        ></bds-uploader>
      </div>
    </div>

    <div class="form-actions">
      <bds-button
        [label]="isSubmitting() ? 'Enviando...' : 'Guardar Formulario'"
        variant="filled"
        type="submit"
        [disabled]="uploadForm.invalid || isSubmitting()"
      ></bds-button>
    </div>

    @if (uploadForm.value | json; as formValue) {
    <div class="debug-value">
      <h4>Valor del Formulario (Debug):</h4>
      <pre>{{ formValue }}</pre>
    </div>
    }
  </form>

  <!-- Uploader deshabilitado (fuera del form para demo simple) -->
  <div class="demo-group">
    <h3>Estado Deshabilitado</h3>
    <bds-uploader [disabled]="true" [dragDropText]="'Uploader deshabilitado'"></bds-uploader>
  </div>
</section>
